!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://cdn.flipsnack.com/site/dist/",n(n.s="./index.js")}({"./index.js":function(e,t,n){"use strict";n.r(t);var o,a,i,r=function(e){var t="https://".concat(window.cloudFront,"/site/images/profile/default-thumb.gz.svg"),n=e.target;n instanceof HTMLImageElement&&n.src!==t&&(n.src=t)},c=function(){var e=document.getElementById("flipbookList");e&&e.addEventListener("error",r,!0),[].forEach.call(document.querySelectorAll("img[data-src]"),(function(e){e.setAttribute("src",e.getAttribute("data-src")),e.addEventListener("load",(function(){e.removeAttribute("data-src")}))}))},s=function(e){return e?Object.keys(e).reduce((function(t,n){return t.push("".concat(n,"=").concat(encodeURIComponent(e[n]))),t}),[]).join("&"):""},l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],d=window,u=d.limit,f=d.profileUserId,p=d.profileUrl,m=d.excludeId,h=d.apiV2,g=document.getElementById("loadMore"),b=document.getElementById("flipbookList"),v=1,w=function(e){var t="";e.forEach((function(e){var n,o,a,i,r=e.date_published.split(" ")[0],c='<div class="col-sm-auto p-0 mx-xs-0 my-xs-2 mx-sm-1 my-md-3 px-md-2 align-top flip-card-container">\n                <a class="flip-card h6" href="'.concat(window.profileUrl).concat(e.link_name,'.html">\n                    <span class="flip-image-container">\n                        <img class="d-block rounded" data-src="').concat(e.coverImgSrc,'">\n                    </span>\n\n                    <strong class="d-inline-block mw-100 font-weight-bold small">').concat(e.name,'</strong><br>\n                    <small class="smaller text-muted">Published on ').concat((n=new Date(r),o=n.getFullYear(),a=l[parseInt("00".concat(n.getMonth()+1).slice(-2),10)-1],i="00".concat(n.getUTCDate()).slice(-2),"".concat(a," ").concat(i,", ").concat(o)),"</small>\n                </a>\n            </div>");t+=c})),b.innerHTML+=t,c()},k=function(){var e;g.classList.add("disabled"),e={p:++v,userId:f,excludeId:m,userUrl:p},fetch("".concat(h,"/publications/related?").concat(s(e))).then((function(e){if(200!==e.status)throw new Error("Invalid response");return e.json()})).catch((function(){g.classList.add("d-none")})).then((function(e){e&&e.length?(w(e),e.length<u&&g.classList.add("d-none"),g.classList.remove("disabled")):g.classList.add("d-none")}))},y=function(){!window.allFlipsLoaded&&g&&(g.classList.remove("d-none"),g.addEventListener("click",k))},E=window,L=E.profileUserId,I=E.loginUrl,x=E.API_ENDPOINT,O=E.USER_ID,S=E.LOGGED,U=document.getElementById("follow"),B=document.getElementById("followed"),j=document.getElementById("unfollow"),P=document.getElementById("cancelUnfollow"),A=document.getElementsByClassName("followCount"),C=function(e){var t=e?B:U,n=e?U:B,o={userId:O,followUserId:L};e&&(o.unFollow=!0),fetch(x,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"mutation FollowUser($followUserId: Int!, $unFollow: Boolean) {\n    followUser(followUserId: $followUserId, unFollow: $unFollow)\n}",variables:o}),credentials:"include"}).then((function(e){return e.json()})).then((function(e){var o=e.data.followUser;e.errors&&e.errors[0]&&e.errors[0].message&&-1!==e.errors[0].message.indexOf("SessionExpiredError")?location.href="".concat(I,"?follow=1"):o.success&&(t.classList.add("d-none"),n.classList.remove("d-none")),t.classList.remove("disabled"),n.classList.remove("disabled"),o.auxData&&void 0!==o.auxData.followersCount&&[].forEach.call(A,(function(e){e.innerHTML=o.auxData.followersCount}))})).catch((function(){t.classList.remove("disabled")}))},T=function(){U&&U.addEventListener("click",(function(){S&&(U.classList.add("disabled"),C())})),j&&j.addEventListener("click",(function(){return S&&(B.classList.add("disabled"),C(!0)),void B.click()})),P&&P.addEventListener("click",(function(){B.click()}))},D=window,H=D.loginUrl,N=D.API_ENDPOINT,F=D.LOGGED,M=D.flipbookHash,_=D.profileUserId,q=window,G=q.liked,J=q.likes,R=document.getElementById("like"),z=document.getElementById("likes"),V=function(){window.location.href="".concat(H,"?like=1")},W=function(){var e;F?((G=!G)?J++:J--,R.classList.add("disabled"),e={flipbookHash:M,flipbookUserId:_,like:G},fetch(N,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"mutation \nlikeFlipbook($flipbookUserId: Int!, $flipbookHash: String!, $like: Boolean!) {\n    likeFlipbook(flipbookUserId: $flipbookUserId, flipbookHash: $flipbookHash, like: $like)\n}",variables:e}),credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.errors&&e.errors[0]&&e.errors[0].message&&-1!==e.errors[0].message.indexOf("SessionExpiredError")&&V(),R.classList.toggle("liked"),R.classList.remove("disabled"),z.innerText=J,0===J?z.classList.add("hidden"):z.classList.remove("hidden")})).catch((function(){R.classList.remove("disabled")}))):V()},K=window,Y=K.loginUrl,Q=K.API_ENDPOINT,X=K.LOGGED,Z=K.flipbookHash,ee=window.iWillReadLaterThisFlipbook,te=document.getElementById("read-later-add"),ne=document.getElementById("read-later-popin"),oe=document.getElementById("read-later"),ae=document.getElementById("read-later-cancel"),ie=function(){window.location.href="".concat(Y,"?read-later=1")},re=function(){var e;X?(te.classList.add("disabled"),e={flipbookHash:Z,readLater:!ee},fetch(Q,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({query:"mutation readLater($flipbookHash: String!, $readLater: Boolean!) {\n    readLater(flipbookHash: $flipbookHash, readLater: $readLater)\n}",variables:e}),credentials:"include"}).then((function(e){return e.json()})).then((function(e){e.errors&&e.errors[0]&&e.errors[0].message&&-1!==e.errors[0].message.indexOf("SessionExpiredError")&&ie(),ee=!ee,te.classList.remove("disabled"),ne.classList.toggle("added-to-list")})).catch((function(){te.classList.remove("disabled")})),oe.click()):ie()},ce=function(e,t){return"http://twitter.com/home?status=".concat(e,"%20").concat(t)},se=function(e,t,n){return"//www.pinterest.com/pin/create/button/?url=".concat(e,"&media=").concat(t,"&description=").concat(n)},le=document.getElementsByClassName("share-social-btn"),de=document.getElementById("copytext"),ue=window,fe=ue.apiV2,pe=ue.requestParams,me=document.getElementById("enableStartFromPage"),he=document.getElementById("startFromPage"),ge=document.getElementById("copytext"),be=document.getElementById("copy-btn"),ve=ge?ge.value:"",we=function(e){if(e){var t=ve.indexOf("&")>-1?"&":"?";ge.value="".concat(ve).concat(t,"p=").concat(e)}else ge.value=ve},ke=function(){var e;(e=$(".popover-handle")).each((function(e,t){var n=$(t).data("class"),o=$(t).data("popover"),a='<div class="popover {className}" role="tooltip">\n    <div class="arrow"></div>\n    <div class="popover-body"></div>\n</div>'.replace("{className}",n);$(t).popover({placement:$(t).data("placement"),content:$(".popover-content.".concat(o)),html:!0,trigger:"click",template:a})})),$(document).on("click",(function(t){e.each((function(e,n){$(n).is(t.target)||0!==$(n).has(t.target).length||0!==$(".popover").has(t.target).length||$(n).popover("hide")}))})),me&&me.addEventListener("click",(function(e){e.stopImmediatePropagation(),he.disabled=!he.disabled,he.classList.toggle("text-muted"),he.disabled?we(null):we(he.value)})),he&&he.addEventListener("change",(function(e){var t=e.target.value;(t=parseInt(t,10))&&t<1&&(t=null),we(t)})),be&&be.addEventListener("click",(function(e){e.preventDefault(),ge.select(),document.execCommand("copy")}))},ye=function(){window.addEventListener("message",(function(e){if(e.data&&"function"==typeof e.data.split&&("getAccessConfirmation"===e.data.split("-")[0]&&window.frames&&window.frames[0]&&window.flipbookHash)){var t=document.querySelector("#myPlayer iframe, #full-reader-link iframe");t&&t.contentWindow.postMessage("".concat("OKACCESS","-").concat(window.flipbookHash),"*")}}))},Ee="profile",Le="details",Ie="full-view";switch(window.profilePage){case Ee:T(),y(),c(),ke();break;case Le:R&&R.addEventListener("click",(function(){return W()})),te&&te.addEventListener("click",(function(){return re()})),ae&&ae.addEventListener("click",(function(){oe.click()})),T(),y(),c(),function(){if(le&&0!==le.length)for(var e=0;e<le.length;e++)le[e].addEventListener("click",(function(e){var t=e.currentTarget,n=t.getAttribute("data-shareon");e.preventDefault();var o,a=window.screen.width/2-300,i=window.screen.height/2-300,r=de.value;switch(n){case"facebook":o="Check out this flipbook!",r="http://www.facebook.com/sharer.php?u=".concat(r,"&t=").concat(o);break;case"twitter":r=ce(r,"Check out this flipbook!");break;case"pinterest":var c=t.getAttribute("description"),s=t.getAttribute("flipbookCoverUrl");r=se(r,s,c)}window.open(r,"Share","toolbar=no, location=no, directories=no, status=no, menubar=no, \n                scrollbars=no, resizable=no, copyhistory=no, \n                width=".concat(600," ,height=").concat(600,",top=").concat(i,", left=").concat(a))}))}(),o=$("#requestAccess"),a=$("#accessNotification"),i=$("#accessError"),a.hide(),i.hide(),o.click((function(){a.addClass("d-node"),i.hide(),fetch("".concat(fe,"/publications/requestAccess?").concat(s(pe))).then((function(e){if(200!==e.status)throw new Error("Invalid response");return e.json()})).catch((function(){i.text("An error occurred, try again later!"),i.show()})).then((function(e){o.hide(),e&&e.success?(a.text(e.message),a.show()):(i.text(e.message),i.show())}))})),ke(),ye();break;case Ie:ye()}}});